// source: modules/billing-stripe/prisma/schema.prisma
model BillingSubscription {
  id                String        @id @default(cuid())
  organization      Organization  @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  organizationId    String        @unique
  customerId        String
  status            String
  priceId           String
  planTier          PlanTier      @default(PRO)
  currentPeriodEnd  DateTime
  cancelAtPeriodEnd Boolean       @default(false)
  trialEndsAt       DateTime?
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
}

// source: modules/auth/prisma/schema.prisma
model AuthUser {
  id              String                 @id @default(cuid())
  email           String                 @unique
  passwordHash    String
  displayName     String?
  emailVerifiedAt DateTime?
  createdAt       DateTime               @default(now())
  updatedAt       DateTime               @updatedAt
  sessions        AuthSession[]
  memberships     OrganizationMember[]
  invitesSent     OrganizationInvite[]   @relation("InviteInvitedBy")
  invitesAccepted OrganizationInvite[]   @relation("InviteAcceptedBy")
  auditLogs       AuditLog[]             @relation("AuditLogActor")
}

model AuthSession {
  id           String   @id @default(cuid())
  token        String   @unique
  user         AuthUser @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId       String
  createdAt    DateTime @default(now())
  lastActiveAt DateTime @default(now())
  expiresAt    DateTime
}
